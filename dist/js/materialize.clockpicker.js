!function(){function t(t){return document.createElementNS(h,t)}function i(t){return(t<10?"0":"")+t}function e(t){var i=++f+"";return t?t+i:i}function s(t,i){var e=t.options[i];e&&"function"==typeof e&&!t.attachedCallBack[i]&&(t.input.on(i+".clockpicker",e),t.attachedCallBack[i]=!0),t.input.trigger(i+".clockpicker",t)}function o(t){this.time=this.parse(t)}function n(n,a){function h(t,i){var e=u.offset(),s=/^touch/.test(t.type),o=e.left+b,n=e.top+b,r=(s?t.originalEvent.touches[0]:t).pageX-o,h=(s?t.originalEvent.touches[0]:t).pageY-n,l=Math.sqrt(r*r+h*h),d=!1;if(!i||!(l<g-y||l>g+y)){t.preventDefault();var k=setTimeout(function(){_.popover.addClass("clockpicker-moving")},200);p&&u.append(_.canvas);var f=!0;f=_.setHand(r,h,!i,!0),c.off(m).on(m,function(t){t.preventDefault();var i=/^touch/.test(t.type),e=(i?t.originalEvent.touches[0]:t).pageX-o,s=(i?t.originalEvent.touches[0]:t).pageY-n;(d||e!==r||s!==h)&&(d=!0,f=_.setHand(e,s,!1,!0))}),c.off(v).on(v,function(t){c.off(v),t.preventDefault();var e=/^touch/.test(t.type),s=(e?t.originalEvent.changedTouches[0]:t).pageX-o,p=(e?t.originalEvent.changedTouches[0]:t).pageY-n;(i||d)&&s===r&&p===h&&(f=_.setHand(s,p)),"hours"===_.currentView?f&&(60!=a.interval?_.toggleView("minutes",A/2):_.done()):a.autoclose&&f&&(_.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){_.done()},A/2)),u.prepend($),clearTimeout(k),_.popover.removeClass("clockpicker-moving"),c.off(m)})}}var l=r(P),u=l.find(".clockpicker-plate"),k=l.find(".picker__holder"),f=l.find(".clockpicker-hours"),C=l.find(".clockpicker-minutes"),x=l.find(".clockpicker-am-pm-block"),T="INPUT"===n.prop("tagName"),H=T?n:n.find("input"),V=r("label[for="+H.attr("id")+"]"),_=this;this.id=e("cp"),this.element=n,this.holder=k,this.options=a,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=T,this.input=H,this.label=V,this.popover=l,this.hoursView=f,this.minutesView=C,this.$aHours=r(),this.$aMinutes=r(),this.amPmBlock=x,this.spanHours=l.find(".clockpicker-span-hours"),this.spanMinutes=l.find(".clockpicker-span-minutes"),this.spanAmPm=l.find(".clockpicker-span-am-pm"),this.footer=l.find(".picker__footer"),this.amOrPm="PM",this.attachedCallBack=[],H.attr("type","text"),this.spanHours.click(r.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(r.proxy(this.toggleView,this,"minutes"));var S=this.time=new o(H.val());this.isValidTime(S.getHours(),S.getMinutes())!==!0&&this.input.val(""),H.on("focus.clockpicker click.clockpicker",r.proxy(this.show,this)),a.twelvehour&&(this.hoursView.addClass("twelvehour"),a.ampmclickable?(r('<div id="click-am">AM</div>').on("click",function(){_.spanAmPm.children("#click-am").addClass("text-primary"),_.spanAmPm.children("#click-pm").removeClass("text-primary"),_.amOrPm="AM"}).appendTo(this.spanAmPm),r('<div id="click-pm">PM</div>').on("click",function(){_.spanAmPm.children("#click-pm").addClass("text-primary"),_.spanAmPm.children("#click-am").removeClass("text-primary"),_.amOrPm="PM"}).appendTo(this.spanAmPm)):(r('<button type="button" class="btn-floating btn-flat clockpicker-button am-button" tabindex="1">AM</button>').on("click",function(){_.setAMorPM("am"),_.amPmBlock.children(".pm-button").removeClass("active"),_.amPmBlock.children(".am-button").addClass("active"),_.spanAmPm.empty().append("AM")}).appendTo(this.amPmBlock),r('<button type="button" class="btn-floating btn-flat clockpicker-button pm-button" tabindex="2">PM</button>').on("click",function(){_.setAMorPM("pm"),_.amPmBlock.children(".am-button").removeClass("active"),_.amPmBlock.children(".pm-button").addClass("active"),_.spanAmPm.empty().append("PM")}).appendTo(this.amPmBlock))),r('<button type="button" class="btn-flat clockpicker-button" tabindex="'+(a.twelvehour?"3":"1")+'">'+a.donetext+"</button>").click(r.proxy(this.done,this)).appendTo(this.footer),a.darktheme?l.addClass("darktheme"):l.removeClass("darktheme");var B,D,O,E,I,U=r('<div class="clockpicker-tick"></div>');for(B=0;B<24;B+=1){O=U.clone(),D=B,this.$aHours.push(O),1!=this.isValidTime(B)&&O.addClass("disabled"),E=B/6*Math.PI;var z=B>0&&B<13;a.twelvehour?(I=g,B>=12?(D=B-12,O.addClass("pm")):O.addClass("am"),0==D&&(D=12)):(I=z?w:g,z&&O.css("font-size","120%")),O.css({left:b+Math.sin(E)*I-y,top:b-Math.cos(E)*I-y}),O.html(0===D?"00":D),f.append(O),O.on(d,h)}for(B=0;B<60;B+=5)O=U.clone(),this.$aMinutes.push(O),1!=this.isValidTime(null,B)&&O.addClass("disabled interval"),E=B/30*Math.PI,O.css({left:b+Math.sin(E)*g-y,top:b-Math.cos(E)*g-y}),O.css("font-size","140%"),O.html(i(B)),C.append(O),O.on(d,h);if(u.on(d,function(t){0===r(t.target).closest(".clockpicker-tick").length&&h(t,!0)}),p){var $=l.find(".clockpicker-canvas").empty(),j=t("svg");j.setAttribute("class","clockpicker-svg"),j.setAttribute("width",M),j.setAttribute("height",M);var L=t("g");L.setAttribute("transform","translate("+b+","+b+")");var N=t("circle");N.setAttribute("class","clockpicker-canvas-bearing"),N.setAttribute("cx",0),N.setAttribute("cy",0),N.setAttribute("r",2);var R=t("line");R.setAttribute("x1",0),R.setAttribute("y1",0);var X=t("circle");X.setAttribute("class","clockpicker-canvas-bg"),X.setAttribute("r",y);var Y=t("circle");Y.setAttribute("class","clockpicker-canvas-fg"),Y.setAttribute("r",5),L.appendChild(R),L.appendChild(X),L.appendChild(Y),L.appendChild(N),j.appendChild(L),$.append(j),this.hand=R,this.bg=X,this.fg=Y,this.bearing=N,this.g=L,this.canvas=$}s(this,"init")}var r=window.jQuery,a=r(window),c=r(document),h="http://www.w3.org/2000/svg",p="SVGAngle"in window&&function(){var t,i=document.createElement("div");return i.innerHTML="<svg/>",t=(i.firstChild&&i.firstChild.namespaceURI)===h,i.innerHTML="",t}(),l=function(){var t=document.createElement("div").style;return"transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t}(),u="ontouchstart"in window,d="mousedown"+(u?" touchstart":""),m="mousemove.clockpicker"+(u?" touchmove.clockpicker":""),v="mouseup.clockpicker"+(u?" touchend.clockpicker":""),k=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,f=0,b=135,g=110,w=80,y=20,M=2*b,A=l?350:1,P=['<div class="clockpicker picker">','<div class="picker__holder">','<div class="picker__frame">','<div class="picker__wrap">','<div class="picker__box">','<div class="picker__date-display">','<div class="clockpicker-display">','<div class="clockpicker-display-column">','<span class="clockpicker-span-hours text-primary"></span>',":",'<span class="clockpicker-span-minutes"></span>',"</div>",'<div class="clockpicker-display-column clockpicker-display-am-pm">','<div class="clockpicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="picker__calendar-container">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<div class="clockpicker-am-pm-block">',"</div>","</div>",'<div class="picker__footer">',"</div>","</div>","</div>","</div>","</div>","</div>"].join("");o.prototype.parse=function(t){if(t instanceof Date)return[t.getHours(),t.getMinutes()];if(Array.isArray(t))return t;if(r.isNumeric(t)){var i=new Date;return[i.getHours()+ +t,i.getMinutes()]}if("string"==typeof t){if("now"===t){var i=new Date;return[i.getHours(),i.getMinutes()]}var e=/(\d{1,2}):(\d{1,2})(\s*)(AM|PM)?/gi.exec(t);return e?(e[4]&&"PM"===e[4]&&(e[1]=+e[1]+12),[+e[1],+e[2]]):[0,0]}return"Parse error"},o.prototype.getHours=function(){return this.time[0]},o.prototype.setHours=function(t){return this.time[0]=t,this},o.prototype.isPm=function(){return this.time[0]>12},o.prototype.getTwelveHours=function(){var t=this.time[0];return this.twelvehour&&(t>12&&(t-=12),0===t&&(t=12)),t},o.prototype.getMinutes=function(){return this.time[1]},o.prototype.setMinutes=function(t){return this.time[1]=t,this},o.prototype.toString=function(){var t=this.time;return this.twelvehour?t[0]<13?i(t[0])+":"+i(t[1])+" AM":i(t[0]-12)+":"+i(t[1])+" PM":i(t[0])+":"+i(t[1])},n.DEFAULTS={"default":"",fromnow:0,donetext:"Done",autoclose:!1,ampmclickable:!1,darktheme:!1,twelvehour:!0,vibrate:!0,dismissible:!0,interval:!1,min:null,max:null,disable:null},n.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},n.prototype._optionRefresh=function(t){return this},n.prototype.option=function(t,i){this.options[t]=i,this._optionRefresh(t)},n.prototype.options=function(t){r.extend(this.options,t);for(var i in t)this._optionRefresh(i)},n.prototype.locate=function(){this.popover.show()},n.prototype.isValidTime=function(t,i){if(null!==t&&void 0===i){if(this.options.min&&this.options.min[0]>t)return"Mimimum";if(this.options.max&&this.options.max[0]<t)return"Maximum";if(this.options.disable&&this.options.disable.some(function(i){return i[0]==t&&void 0===i[1]}))return"Disabled time"}if(void 0!==i){if(this.options.interval&&i%this.options.interval!==0)return"Out of interval";if(this.options.interval&&i%this.options.interval!==0)return"Out of interval";if(this.options.disable&&this.options.disable.some(function(t){return null==t[0]&&t[1]==i}))return"Disabled time"}if(null!=t&&void 0!==i){if(this.options.min&&this.options.min[0]===t&&this.options.min[1]>i)return"Minimum";if(this.options.max&&this.options.max[0]===t&&this.options.max[1]<i)return"Maximum";if(this.options.disable&&this.options.disable.some(function(e){return e[0]==t&&e[1]==i||e[0]==t&&void 0==e[1]||null==e[0]&&e[1]==i}))return"Disabled time"}return!0},n.prototype.setAMorPM=function(t){var i=t;if(t.toUpperCase()!==this.amOrPm){var e=0;e="pm"==i?this.time.getHours()+12:this.time.getHours()-12,this.time.setHours(e)}var s="pm"==t?"am":"pm";this.hoursView.addClass(i).removeClass(s),this.options.twelvehour&&(this.amOrPm=i.toUpperCase(),this.options.ampmclickable?(this.spanAmPm.children("#click-"+i).addClass("text-primary"),this.spanAmPm.children("#click-"+s).removeClass("text-primary")):(this.amPmBlock.children("."+s+"-button").removeClass("active"),this.amPmBlock.children("."+i+"-button").addClass("active"),this.spanAmPm.empty().append(this.amOrPm)))},n.prototype.show=function(t){if(!this.isShown){s(this,"beforeShow"),r(":input").each(function(){r(this).attr("tabindex",-1)});var e=this;this.input.blur(),this.popover.addClass("picker--opened"),this.input.addClass("picker__input picker__input--active"),r(document.body).css("overflow","hidden"),this.isAppended||(this.options.hasOwnProperty("container")?this.popover.appendTo(this.options.container):this.popover.insertAfter(this.input),this.setAMorPM("pm"),a.on("resize.clockpicker"+this.id,function(){e.isShown&&e.locate()}),this.isAppended=!0);var n=this.time=new o(this.input.val()||this.options["default"]||"now");this.options.twelvehour&&(n.twelvehour=!0,n.isPm()?this.setAMorPM("pm"):this.setAMorPM("am")),this.isValidTime(null,n.getMinutes())!==!0&&n.setMinutes(0),this.isValidTime(n.getHours(),n.getMinutes())!==!0&&(this.input.val(""),n.parse([0,0])),this.spanHours.html(i(n.getTwelveHours())),this.spanMinutes.html(i(n.getMinutes())),this.toggleView("hours"),this.locate(),this.isShown=!0,c.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){var i=r(t.target);0===i.closest(e.popover.find(".picker__wrap")).length&&0===i.closest(e.input).length&&e.options.dismissible&&e.hide()}),c.on("keyup.clockpicker."+this.id,function(t){27===t.keyCode&&e.hide()}),s(this,"afterShow")}},n.prototype.hide=function(){s(this,"beforeHide"),this.input.removeClass("picker__input picker__input--active"),this.popover.removeClass("picker--opened"),r(document.body).css("overflow","visible"),this.isShown=!1,r(":input").each(function(t){r(this).attr("tabindex",t+1)}),c.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),c.off("keyup.clockpicker."+this.id),this.popover.hide(),s(this,"afterHide")},n.prototype.toggleView=function(t,i){var e=this,o=!1;"minutes"===t&&"visible"===r(this.hoursView).css("visibility")&&(s(this,"beforeHourSelect"),this.$aMinutes.each(function(t,i){i.hasClass("disabled interval")||(e.isValidTime(e.hours,5*t)!==!0?i.addClass("disabled"):i.removeClass("disabled"))}),o=!0);var n="hours"===t,a=n?this.hoursView:this.minutesView,c=n?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",n),this.spanMinutes.toggleClass("text-primary",!n),c.addClass("clockpicker-dial-out"),a.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(i),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){c.css("visibility","hidden")},A),o&&s(this,"afterHourSelect")},n.prototype.resetClock=function(t){var i=this.currentView,e="hours"===i,s=e?this.time.getHours():this.time.getMinutes(),o=Math.PI/(e?6:30),n=s*o,r=e&&s>0&&s<13?w:g,a=Math.sin(n)*r,c=-Math.cos(n)*r,h=this;p&&t?(h.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){h.canvas.removeClass("clockpicker-canvas-out"),h.setHand(a,c)||h.resetHand()},t)):this.setHand(a,c)||this.resetHand()},n.prototype.resetHand=function(){this.hand.setAttribute("x2",0),this.hand.setAttribute("y2",0),this.bg.setAttribute("cx",0),this.bg.setAttribute("cy",0),this.fg.setAttribute("cx",0),this.fg.setAttribute("cy",0)},n.prototype.setHand=function(t,e,s,o){var n,a=Math.atan2(t,-e),c="hours"===this.currentView,h=Math.PI/(c||s?6:30),l=Math.sqrt(t*t+e*e),u=this.options,d=c&&l<(g+w)/2,m=d?w:g,v="";if(u.twelvehour&&(m=g),a<0&&(a=2*Math.PI+a),n=Math.round(a/h),a=n*h,c){if(u.twelvehour?("PM"===this.amOrPm&&(n+=12),12===n&&"AM"===this.amOrPm&&(n=0),24===n&&(n=12)):(12===n&&(n=0),n=d?0===n?12:n:0===n?0:n+12),1!=this.isValidTime(n))return!1;this.time.setHours(n),v=this.time.getTwelveHours()}else{if(s&&(n*=5),60===n&&(n=0),1!=this.isValidTime(this.time.getHours(),n))return!1;this.time.setMinutes(n),v=n}if(c?this.fg.setAttribute("class","clockpicker-canvas-fg"):n%5===0?this.fg.setAttribute("class","clockpicker-canvas-fg"):this.fg.setAttribute("class","clockpicker-canvas-fg active"),this[this.currentView]!==n&&k&&this.options.vibrate&&(this.vibrateTimer||(navigator[k](10),this.vibrateTimer=setTimeout(r.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=n,this[c?"spanHours":"spanMinutes"].html(i(v)),!p)return this[c?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=r(this);t.toggleClass("active",n===+t.html())}),!0;o||!c&&n%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var f=Math.sin(a)*(m-y),b=-Math.cos(a)*(m-y),M=Math.sin(a)*m,A=-Math.cos(a)*m;return this.hand.setAttribute("x2",f),this.hand.setAttribute("y2",b),this.bg.setAttribute("cx",M),this.bg.setAttribute("cy",A),this.fg.setAttribute("cx",M),this.fg.setAttribute("cy",A),!0},n.prototype.done=function(){s(this,"beforeDone"),this.hide(),this.label.addClass("active");var t=this.input.val(),i=this.time.toString();this.input.val(i),i!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),s(this,"afterDone")},n.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(a.off("resize.clockpicker"+this.id),this.popover.remove())},r.fn.pickatime=function(t){var i=Array.prototype.slice.call(arguments,1),e=this.data("datetimepicker");if("picker"===t)return e;var s;return this.each(function(){var e=r(this),o=e.data("clockpicker");o?(r.isPlainObject(t)&&(s=r.extend({},o.options,t),o.options=s),"function"==typeof o[t]&&o[t].apply(o,i)):(s=r.extend({},n.DEFAULTS,e.data(),"object"==typeof t&&t),e.data("clockpicker",new n(e,s)))})}}();